# Сравнение IPsec и WireGuard

| Критерий                         | IPsec                                                                 | WireGuard                                                              |
|----------------------------------|------------------------------------------------------------------------|------------------------------------------------------------------------|
| **Уровень протокола**           | Сетевой уровень (OSI Layer 3)                                          | Сетевой уровень (OSI Layer 3)                                          |
| **Протоколы**                   | IKEv1/IKEv2, ESP, AH, NAT-T                                            | Свой протокол поверх UDP (порт 51820 по умолчанию)                    |
| **Безопасность**               | Поддерживает множество алгоритмов (AES, 3DES, SHA2, DH и др.)          | Современная криптография: Curve25519, ChaCha20, Poly1305, BLAKE2s     |
| **Производительность**         | Средняя, зависит от реализации и наличия аппаратного ускорения         | Очень высокая, почти нативная скорость даже без AES-NI                |
| **Простота настройки**         | Сложная: множество параметров, требует знаний о IKE, SA и т.д.         | Очень простая: ключи, IP и endpoint — всё                             |
| **Размер кода/атака на поверхность** | Большой (сотни тысяч строк, множество зависимостей)                     | Маленький (менее 5K строк ядра, проверен криптоэкспертами)            |
| **Поддержка роуминга**         | Плохая (туннель рвётся при смене IP, особенно с IKEv1)                 | Отличная (автоматически восстанавливается при смене IP)               |
| **Поддержка NAT**              | Частичная (нужен NAT-T, работает не всегда стабильно)                  | Отличная (работает поверх UDP, без танцев с NAT-T)                    |
| **Скорость установления соединения** | Медленная (обмен сертификатами, IKE negotiation)                        | Мгновенная (peer-to-peer handshake за 1 RTT)                          |
| **Поддержка в ОС**             | Встроен в Windows, Linux, macOS, Cisco, MikroTik и т.д.               | Есть в ядре Linux, клиенты для Windows/macOS/iOS/Android              |
| **Масштабируемость**           | Средняя (долго настраивать 100+ туннелей вручную)                      | Отличная (удобна для массового подключения клиентов/филиалов)         |
| **Обновление ключей**          | Через переинициализацию SA, не всегда быстро                           | Автоматическое, встроенное в протокол                                 |
| **Применение в корпорациях**   | Да, часто используется (соответствует стандартам IPSec RFC)           | Да, всё чаще используется, но не всегда одобрен в регламентированных средах |
| **Совместимость со стандартами** | Высокая (RFC 4301 и др.)                                                | Пока нет RFC, но активно внедряется                                   |

---

## Вывод

- **IPsec** хорош для сложных корпоративных сетей, где важно соблюдение стандартов, аппаратное ускорение, межсетевые политики и совместимость с сетевым оборудованием.
- **WireGuard** выигрывает в производительности, простоте, мобильности и надёжности — идеально подходит для современных сценариев (особенно с роутерами MikroTik, Linux-серверами и мобильными устройствами).

